#N canvas 527 52 687 608 10;
#X declare -lib timbreIDLib -path ./lib;
#N canvas 0 22 450 300 arrays 0;
#X obj 10 10 clone fd_arrayclone 42 define c;
#X restore 494 100 pd arrays;
#X obj 495 72 text define filenames;
#X text 325 71 filenames loaded into -->;
#X text 344 97 files loaded into -->;
#N canvas 585 158 450 300 play 0;
#X obj 34 221 dac~;
#X obj 48 150 tabplay~ c-0;
#X obj 107 64 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 55 103 set c-\$1 \, bang;
#X obj 265 136 text get filenames;
#X msg 25 17 stop;
#X msg 112 15 0;
#X obj 188 62 counter;
#X obj 278 76 text size filenames;
#X obj 264 109 mod 42;
#X obj 159 164 array size;
#X obj 159 186 / 44100;
#X obj 159 208 / 60;
#X msg 162 122 symbol c-\$1;
#X obj 162 144 t b a;
#X obj 276 173 list prepend;
#X obj 188 84 t a a a;
#X obj 194 37 t b b;
#X obj 307 234 print playing:;
#X obj 291 203 list trim;
#X msg 159 230 list size: \$1 minutes;
#X obj 73 17 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X connect 1 0 0 0;
#X connect 1 0 0 1;
#X connect 1 1 2 0;
#X connect 2 0 17 0;
#X connect 3 0 1 0;
#X connect 4 0 15 1;
#X connect 5 0 1 0;
#X connect 6 0 7 0;
#X connect 7 0 16 0;
#X connect 8 0 9 1;
#X connect 9 0 4 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 20 0;
#X connect 13 0 14 0;
#X connect 14 0 10 0;
#X connect 14 1 10 1;
#X connect 15 0 19 0;
#X connect 16 0 3 0;
#X connect 16 1 13 0;
#X connect 16 2 9 0;
#X connect 17 0 7 0;
#X connect 17 1 8 0;
#X connect 19 0 18 0;
#X connect 20 0 15 0;
#X connect 21 0 2 0;
#X restore 494 128 pd play sounds;
#N canvas 0 22 450 489 load 0;
#N canvas 0 22 450 300 basename 0;
#X obj 57 65 list prepend basename;
#X obj 57 87 list append .wav;
#X obj 57 109 list trim;
#X obj 57 131 ggee/shell;
#X obj 56 220 print;
#X obj 58 44 text sequence filenames;
#X msg 134 131 step;
#X obj 130 110 sel;
#X msg 57 23 line 0 \, step;
#X obj 106 155 print basename;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 1 7 0;
#X connect 5 0 0 0;
#X connect 6 0 5 0;
#X connect 7 0 6 0;
#X connect 7 1 9 0;
#X connect 8 0 5 0;
#X restore 154 92 pd basename;
#N canvas 0 22 450 300 filenames 0;
#X obj 26 70 ggee/getdir;
#X obj 28 150 ggee/shell;
#X obj 28 172 t a b;
#X obj 28 194 list;
#X obj 28 216 text set filenames;
#X obj 69 194 counter;
#X obj 108 146 sel;
#X msg 71 174 0;
#X obj 99 172 t b b;
#X obj 166 164 print ls;
#X obj 27 23 inlet;
#X obj 147 280 outlet;
#X msg 28 128 ls \$1/\$2;
#X obj 26 46 t b a;
#X obj 27 99 list append ../colorsounds/;
#X connect 0 0 14 0;
#X connect 1 0 2 0;
#X connect 1 1 6 0;
#X connect 2 0 3 0;
#X connect 2 1 5 0;
#X connect 3 0 4 0;
#X connect 5 0 4 1;
#X connect 6 0 8 0;
#X connect 6 1 9 0;
#X connect 7 0 5 0;
#X connect 8 0 7 0;
#X connect 8 1 11 0;
#X connect 10 0 13 0;
#X connect 12 0 1 0;
#X connect 13 0 0 0;
#X connect 13 1 14 1;
#X connect 14 0 12 0;
#X restore 66 92 pd filenames;
#X obj 66 66 t a a;
#X obj 65 41 symbol;
#N canvas 0 22 450 300 create 0;
#X msg 22 57 bang;
#X obj 11 80 text size filenames;
#X msg 44 159 \; pd-arrays clear \, obj 10 10 clone fd_arrayclone \$1
define c;
#X obj 11 102 t f f;
#X obj 12 24 inlet;
#X obj 10 273 outlet;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 3 0 5 0;
#X connect 3 1 2 0;
#X connect 4 0 1 0;
#X restore 64 137 pd create arrays;
#N canvas 0 22 450 300 load 0;
#X obj 59 55 iterate;
#X obj 59 77 t f f;
#X obj 59 99 text get filenames;
#X obj 59 121 list prepend ../colorsounds/;
#X msg 59 163 read -resize \$1/\$2 c-\$3;
#X obj 59 143 list;
#X obj 59 185 soundfiler;
#X obj 55 20 inlet;
#X obj 291 19 inlet;
#X obj 250 224 outlet;
#X connect 0 0 1 0;
#X connect 0 1 9 0;
#X connect 1 0 2 0;
#X connect 1 1 5 1;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X connect 7 0 0 0;
#X connect 8 0 3 1;
#X restore 63 164 pd load arrays;
#X obj 60 233 iterate;
#X obj 60 255 t b f;
#X obj 60 277 array size;
#X obj 60 299 fd_sum;
#X obj 62 357 / 44100;
#X obj 62 379 / 60;
#X msg 109 255 symbol c-\$1;
#X obj 62 321 f;
#X obj 63 188 text size filenames;
#X obj 63 210 t f b;
#X obj 96 321 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 62 401 print total_minutes;
#X obj 68 13 r load_sounds;
#X connect 1 0 4 0;
#X connect 2 0 1 0;
#X connect 2 1 5 1;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 14 0;
#X connect 6 0 7 0;
#X connect 6 1 13 0;
#X connect 7 0 8 0;
#X connect 7 1 12 0;
#X connect 8 0 9 0;
#X connect 9 0 13 1;
#X connect 10 0 11 0;
#X connect 11 0 17 0;
#X connect 12 0 8 1;
#X connect 13 0 10 0;
#X connect 14 0 15 0;
#X connect 15 0 6 0;
#X connect 15 1 9 1;
#X connect 16 0 13 0;
#X connect 18 0 3 0;
#X restore 497 39 pd load sounds;
#X msg 73 82 \; load_sounds ../colorsounds/;
#X text 66 61 load with path to sound directory;
#X msg 87 145 \; analysis-overlap 1 \; analysis-window-size 4096 \;
;
#N canvas 0 22 787 720 feature_params 0;
#X obj 54 86 hradio 15 1 0 5 empty empty empty 0 -8 0 10 -262144 -1
-1 0;
#X msg 54 106 window_function \$1;
#X msg 110 168 set another-sample-array;
#X msg 149 224 samplerate 48000;
#X text 298 167 Read from a different array;
#X msg 175 277 power_spectrum \$1;
#X obj 175 259 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 54 575 outlet;
#X text 283 223 Specify your sample's sampling rate. (default: 44100)
;
#X text 316 277 Use power spectrum. (default: magnitude);
#X msg 301 521 print;
#X obj 219 401 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 219 421 spec_band_avg \$1;
#X obj 249 461 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 249 481 filter_avg \$1;
#X text 351 523 Print current settings in the post window;
#X text 52 49 Change windowing function. Rectangular (0) \, Blackman
(1) \, Cosine (2) \, Hamming (3) \, or Hann (4). (default: Blackman)
;
#X text 275 449 If using the triangular Bark spaced filters \, you
can either sum or average the energy in each filter (default: sum)
;
#X text 245 369 Rather than sum energy in the triangular Bark spaced
filters to get the amount of energy in each Bark band \, you can average
energy in the unfiltered bins (default: OFF);
#X text 301 323 Construct a new filterbank with a specific spacing.
;
#X msg 201 323 filterbank 1;
#X text 186 136 Change internal window size setting;
#X msg 84 136 window 2000;
#X connect 0 0 1 0;
#X connect 1 0 7 0;
#X connect 2 0 7 0;
#X connect 3 0 7 0;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 10 0 7 0;
#X connect 11 0 12 0;
#X connect 12 0 7 0;
#X connect 13 0 14 0;
#X connect 14 0 7 0;
#X connect 20 0 7 0;
#X connect 22 0 7 0;
#X restore 298 224 pd feature_params;
#X msg 79 205 \; barkSpecIrregularity normalize 1 \; barkSpecIrregularity
algorithm 0 \; barkSpecRolloff concentration 0.7 \; barkSpecBrightness
boundary 8.5 \; barkSpecSlope normalize 1 \;;
#N canvas 0 22 583 384 feature_chain 0;
#X text 72 62 order is important!;
#N canvas 302 35 809 628 features 0;
#X obj 412 480 barkSpecSlope;
#X obj 375 427 barkSpecKurtosis;
#X obj 309 377 barkSpecSkewness;
#X obj 267 326 barkSpecBrightness;
#X obj 233 267 barkSpecFlatness;
#X obj 188 219 barkSpecRolloff;
#X obj 156 161 barkSpecCentroid;
#X obj 120 102 barkSpecSpread;
#X obj 63 51 barkSpecIrregularity;
#X obj 62 30 r barkSpecIrregularity;
#X obj 119 82 r barkSpecSpread;
#X obj 157 139 r barkSpecCentroid;
#X obj 190 192 r barkSpecRolloff;
#X obj 230 247 r barkSpecFlatness;
#X obj 261 303 r barkSpecBrightness;
#X obj 309 354 r barkSpecSkewness;
#X obj 371 404 r barkSpecKurtosis;
#X obj 412 458 r barkSpecSlope;
#X obj 57 555 s feature_accumulator;
#X msg 220 45 algorithm \$1;
#X obj 220 25 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 314 39 Change between Jensen (0) and Krimphoff (1) algorithm
, f 28;
#X text 246 23 IRREGULARITY;
#X msg 316 209 concentration 0.7;
#X text 467 202 Change the concentration threshold (0 - 1.0), f 26
;
#X text 325 184 ROLLOFF:;
#X floatatom 407 299 5 0 0 0 - - -;
#X msg 407 318 boundary \$1;
#X text 450 296 BRIGHTNESS:;
#X text 488 319 Change the boundary point in Barks (8.5);
#X connect 0 0 18 0;
#X connect 1 0 18 0;
#X connect 2 0 18 0;
#X connect 3 0 18 0;
#X connect 4 0 18 0;
#X connect 5 0 18 0;
#X connect 6 0 18 0;
#X connect 7 0 18 0;
#X connect 8 0 18 0;
#X connect 9 0 8 0;
#X connect 10 0 7 0;
#X connect 11 0 6 0;
#X connect 12 0 5 0;
#X connect 13 0 4 0;
#X connect 14 0 3 0;
#X connect 15 0 2 0;
#X connect 16 0 1 0;
#X connect 17 0 0 0;
#X connect 20 0 19 0;
#X connect 26 0 27 0;
#X restore 381 198 pd features;
#X obj 171 298 s barkSpecIrregularity;
#X obj 171 276 s barkSpecSpread;
#X obj 171 254 s barkSpecCentroid;
#X obj 171 232 s barkSpecRolloff;
#X obj 171 210 s barkSpecFlatness;
#X obj 171 188 s barkSpecBrightness;
#X obj 171 164 s barkSpecSkewness;
#X obj 171 139 s barkSpecKurtosis;
#X obj 172 114 s barkSpecSlope;
#X obj 61 85 t a a a a a a a a a;
#X text 330 162 |||||||, f 1;
#N canvas 0 22 450 300 feature_accumulator 0;
#X obj 115 72 r feature_accumulator;
#X obj 115 94 featureAccum 9 1 0 concat;
#X obj 115 116 s timbreID;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X restore 381 220 pd feature_accumulator;
#X obj 61 37 r feature_chain;
#X connect 11 0 2 0;
#X connect 11 1 3 0;
#X connect 11 2 4 0;
#X connect 11 3 5 0;
#X connect 11 4 6 0;
#X connect 11 5 7 0;
#X connect 11 6 8 0;
#X connect 11 7 9 0;
#X connect 11 8 10 0;
#X connect 14 0 11 0;
#X restore 552 235 pd feature_chain;
#N canvas 0 22 450 300 barkSpec 0;
#X obj 35 123 list trim;
#X obj 35 69 barkSpec;
#X obj 35 37 r barkSpec;
#X obj 35 147 t a b;
#X msg 62 170 \; feature_accumulator clear;
#X obj 35 236 s feature_chain;
#X text 97 70 <-- analysis done once and passed with chain_ selector
;
#X obj 35 101 list prepend chain_barkSpec;
#X connect 0 0 3 0;
#X connect 1 0 7 0;
#X connect 2 0 1 0;
#X connect 3 0 5 0;
#X connect 3 1 4 0;
#X connect 7 0 0 0;
#X restore 552 210 pd barkSpec;
#N canvas 0 22 704 482 iterate 0;
#X obj 94 321 pack f f;
#X obj 94 227 until;
#X msg 140 226 0;
#X obj 447 72 r analysis-window-size;
#X obj 462 93 r analysis-overlap;
#X obj 140 298 r analysis-window-size;
#X obj 94 206 f;
#X obj 94 274 f;
#X obj 447 123 /;
#X obj 243 191 /;
#X obj 124 274 +;
#X obj 57 100 t b b b b;
#X obj 294 78 t a a;
#X obj 243 122 t b a;
#X obj 243 144 array size;
#X msg 128 139 \; timbreID clear;
#X obj 258 170 r step_size;
#X obj 139 253 r step_size;
#X obj 447 144 s step_size;
#X obj 321 400 s barkSpec;
#X msg 322 296 set \$1;
#X msg 95 343 analyze \$1 \$2;
#X obj 57 15 r array_name;
#X obj 57 42 t b a;
#X msg 61 408 \; timbreID num_instances \;;
#X connect 0 0 21 0;
#X connect 1 0 7 0;
#X connect 2 0 7 1;
#X connect 3 0 8 0;
#X connect 4 0 8 1;
#X connect 5 0 0 1;
#X connect 6 0 1 0;
#X connect 7 0 0 0;
#X connect 7 0 10 0;
#X connect 8 0 18 0;
#X connect 9 0 6 1;
#X connect 10 0 7 1;
#X connect 11 0 24 0;
#X connect 11 1 6 0;
#X connect 11 2 2 0;
#X connect 11 3 15 0;
#X connect 12 0 13 0;
#X connect 12 1 20 0;
#X connect 13 0 14 0;
#X connect 13 1 14 1;
#X connect 14 0 9 0;
#X connect 16 0 9 1;
#X connect 17 0 10 1;
#X connect 20 0 19 0;
#X connect 21 0 19 0;
#X connect 22 0 23 0;
#X connect 23 0 11 0;
#X connect 23 1 12 0;
#X restore 552 184 pd iterate;
#X text 438 210 analyze -->;
#X text 524 176 |||||||, f 1;
#X obj 26 18 declare -lib timbreIDLib -path ./lib;
#X msg 79 308 3;
#X msg 80 331 \; array_idx \$1 \; array_name symbol c-\$1;
#N canvas 216 153 398 285 write_timid 0;
#X obj 66 83 ggee/getdir;
#X obj 66 140 list;
#X obj 191 78 text get filenames;
#X obj 191 100 _list-strip 4;
#X obj 191 56 r array_idx;
#X msg 65 176 \; timbreID write \$1/../data/\$2.timid \; done_writing
bang;
#X obj 66 19 r write_timid;
#X connect 0 0 1 0;
#X connect 1 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 1 1;
#X connect 4 0 2 0;
#X connect 6 0 0 0;
#X restore 550 261 pd write_timid;
#N canvas 0 22 450 300 timbreID 0;
#X obj 116 41 timbreID;
#X obj 116 17 r timbreID;
#X obj 161 71 route num_instances;
#X obj 161 93 !=;
#X obj 198 136 r array_name;
#X obj 181 160 symbol;
#X msg 181 182 something went wrong with array <\$1> \, no instances
recorded, f 20;
#X obj 179 230 print error;
#X obj 161 115 sel 1 0;
#X obj 161 253 s write_timid;
#X connect 0 3 2 0;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 3 0 8 0;
#X connect 4 0 5 1;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 8 0 9 0;
#X connect 8 1 5 0;
#X restore 432 185 pd timbreID;
#X obj 508 310 r done_writing;
#X obj 508 332 print;
#X connect 17 0 18 0;
#X connect 21 0 22 0;
