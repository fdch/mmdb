#N canvas 521 50 452 302 12;
#X declare -lib Gem -path pix_opencv -path ./lib -lib timbreIDLib;
#X obj 26 128 text define entries;
#X msg 28 248 \; analyze list ../img/i-*.jpg 30 test-3;
#N canvas 0 22 450 300 loadbang 0;
#X obj 11 22 loadbang;
#X msg 11 55 \; blobs-params 80 91 \; circles-params 20 11 4 15 14
\; lines-params 20 1 66 35 10 10 12 \; histo-params 0.7 \; keypoints-params
10 100 \; cluster-params 5 5 \; entries clear \; faces-params load
../haarcascade/haarcascade_frontalface_alt.xml \; roi-txt symbol ../txt/roi.txt
\; roi-flag 0 \; bodies-params load ../haarcascade/haarcascade_fullbody.xml
\;;
#X connect 0 0 1 0;
#X restore 26 162 pd loadbang;
#X text 25 219 send a similar message from terminal;
#X text 181 14 "analyze";
#X text 24 51 Analyzes image files and outputs data into text files
;
#N canvas 61 0 842 751 analyze 0;
#X obj 562 275 gemwin;
#X obj 176 443 pix_multiimage;
#X obj 176 390 gemhead;
#X obj 435 124 t a b;
#X msg 435 154 open \$1 \$2;
#X obj 403 96 t a a;
#X msg 403 126 \$2;
#X obj 449 203 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 100 203 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 271 363 f;
#X obj 382 373 f;
#X obj 418 373 + 1;
#X obj 318 318 f;
#X obj 353 317 + 1;
#X msg 318 208 0;
#X obj 271 390 moses;
#X obj 220 189 t b f b;
#X msg 252 253 1;
#X obj 468 287 t b b;
#X msg 249 70 0;
#X obj 252 278 t f f;
#X obj 403 42 r analyze;
#X obj 492 334 symbol;
#X obj 403 70 list split 2;
#X msg 562 302 destroy;
#X obj 492 565 del 3000;
#X msg 492 592 \; pd quit;
#X msg 524 502 quitting...;
#X obj 524 528 print;
#X obj 61 284 spigot;
#X obj 61 536 del 1;
#X obj 382 399 mod 5;
#X msg 562 248 create;
#X obj 208 569 pix_texture;
#X obj 208 597 rectangle 4 3;
#X obj 249 124 t f f;
#X obj 176 543 t b a;
#X obj 176 656 spigot;
#X obj 176 684 t b b;
#X msg 226 683 0;
#X obj 232 632 r reset;
#X msg 232 658 1;
#X obj 327 646 change;
#X msg 327 672 analyzing i-\$1.jpg...;
#X obj 327 698 print;
#X obj 327 620 r index;
#N canvas 0 22 758 478 fill_texts 0;
#X obj 67 130 list store;
#X obj 67 104 r store_entries;
#X obj 108 64 t b b;
#X obj 67 156 t b a;
#X obj 272 38 r index;
#X obj 27 16 inlet;
#X obj 27 45 t b b;
#X obj 27 288 outlet;
#X obj 99 263 text set entries;
#X obj 98 198 list prepend;
#X obj 286 94 list prepend id;
#X obj 286 120 list prepend add;
#X obj 286 146 list trim;
#X obj 286 172 s json-data;
#X obj 196 37 r base;
#X obj 178 70 symbol;
#X obj 263 67 t f f f f;
#X obj 254 209 list append;
#X msg 107 290 \; json-data write ../txt/\$1-\$2-data.json \, clear
\;;
#X connect 0 0 3 0;
#X connect 1 0 0 0;
#X connect 2 0 0 0;
#X connect 2 1 15 0;
#X connect 3 0 0 1;
#X connect 3 1 9 0;
#X connect 4 0 16 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 6 1 2 0;
#X connect 9 0 8 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 14 0 15 1;
#X connect 15 0 17 0;
#X connect 16 0 9 1;
#X connect 16 1 10 0;
#X connect 16 2 8 1;
#X connect 16 3 17 1;
#X connect 17 0 18 0;
#X restore 176 719 pd fill_texts;
#X obj 271 416 t f f b;
#X obj 220 226 t b b;
#X msg 220 301 0;
#X obj 492 363 t b a b;
#X obj 492 471 t b b;
#X text 77 505 see here -->;
#N canvas 137 14 650 473 features 0;
#N canvas 305 44 714 614 circles 0;
#X obj 41 152 pix_opencv_hough_circles;
#X text 410 309 X1;
#X text 446 309 Y1;
#X text 483 310 radius;
#X obj 44 22 inlet;
#X obj 593 534 outlet;
#X obj 41 88 separator;
#N canvas 0 22 604 375 circles-params 0;
#X msg 59 118 threshold \$1;
#X msg 51 90 maxcircles \$1;
#X text 157 89 maximum nuber of circles detected ( default : 10 );
#X msg 71 149 threshold2 \$1;
#X msg 91 178 mindist \$1;
#X text 170 175 minimum distance between circles ( default : 30 );
#X msg 108 212 resolution \$1;
#X text 215 209 detector resolution ( default 1 );
#X text 148 115 threshold ( default 100 );
#X text 174 151 threshold2 ( default 10 );
#X obj 51 21 r circles-params;
#X obj 51 49 unpack f f f f f;
#X obj 51 277 outlet;
#X connect 0 0 12 0;
#X connect 1 0 12 0;
#X connect 3 0 12 0;
#X connect 4 0 12 0;
#X connect 6 0 12 0;
#X connect 10 0 11 0;
#X connect 11 0 1 0;
#X connect 11 1 0 0;
#X connect 11 2 3 0;
#X connect 11 3 4 0;
#X connect 11 4 6 0;
#X restore 57 119 pd circles-params;
#X obj 208 342 f;
#X obj 242 342 + 1;
#X msg 226 311 0;
#X obj 177 390 f;
#X text 209 388 how many;
#X obj 220 277 r reset;
#X obj 174 421 list prepend append;
#X obj 174 447 list trim;
#X obj 174 473 s store_entries;
#X msg 367 222 add id \$1;
#X obj 360 339 purest_json/json-encode;
#X obj 304 155 t b a b;
#X msg 515 189 clear;
#X obj 360 393 list trim;
#X obj 358 420 s json-data;
#X obj 360 365 list prepend array circles;
#X obj 359 190 unpack f f f f;
#X msg 379 245 add x \$1;
#X msg 389 265 add y \$1;
#X msg 399 285 add r \$1;
#X obj 57 271 spigot;
#X obj 57 297 t b b;
#X msg 99 298 0;
#X msg 106 274 1;
#X obj 111 249 r reset;
#X obj 182 183 t b a;
#X obj 70 437 t b b;
#X obj 133 533 t b;
#X obj 42 55 t a a, f 85;
#X obj 586 495 gemlist;
#X connect 0 0 28 0;
#X connect 0 1 33 0;
#X connect 4 0 36 0;
#X connect 6 0 0 0;
#X connect 7 0 0 0;
#X connect 8 0 9 0;
#X connect 9 0 8 1;
#X connect 9 0 11 1;
#X connect 10 0 8 1;
#X connect 11 0 14 0;
#X connect 13 0 10 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 17 0 18 0;
#X connect 18 0 23 0;
#X connect 19 0 18 0;
#X connect 19 1 24 0;
#X connect 19 2 20 0;
#X connect 20 0 18 0;
#X connect 21 0 22 0;
#X connect 23 0 21 0;
#X connect 24 0 17 0;
#X connect 24 1 25 0;
#X connect 24 2 26 0;
#X connect 24 3 27 0;
#X connect 25 0 18 0;
#X connect 26 0 18 0;
#X connect 27 0 18 0;
#X connect 28 0 29 0;
#X connect 29 0 34 0;
#X connect 29 1 30 0;
#X connect 30 0 28 1;
#X connect 31 0 28 1;
#X connect 32 0 31 0;
#X connect 33 0 8 0;
#X connect 33 1 19 0;
#X connect 34 0 35 0;
#X connect 34 1 11 0;
#X connect 35 0 37 0;
#X connect 36 0 6 0;
#X connect 36 1 37 1;
#X connect 37 0 5 0;
#X restore 34 383 pd circles;
#N canvas 227 45 784 660 lines 0;
#X obj 47 15 inlet;
#X obj 509 582 outlet;
#X obj 157 324 f;
#X obj 191 324 + 1;
#X msg 185 293 0;
#X obj 142 367 f;
#X obj 46 167 pix_opencv_hough_lines;
#X text 384 161 X1;
#X text 411 158 Y1;
#X text 441 157 X2;
#X text 462 158 Y2;
#X text 174 365 how many;
#X obj 46 99 separator;
#X obj 188 268 r reset;
#X obj 139 398 list prepend append;
#X obj 139 424 list trim;
#X obj 139 450 s store_entries;
#N canvas 0 22 740 407 lines-params 0;
#X msg 41 103 mode \$1;
#X text 101 107 CV_HOUGH_STANDARD;
#X text 229 108 CV_HOUGH_PROBABILISTIC;
#X text 397 110 CV_HOUGN_MULTI_SCALE;
#X msg 50 134 threshold \$1;
#X msg 60 164 minlength \$1;
#X msg 68 195 gap \$1;
#X text 128 195 gap betwwen lines ( default 10 \, for mode CV_HOUGH_PROBABILISTIC
), f 66;
#X text 160 163 minimum length ( default 30 \, for mode CV_HOUGH_PROBABILISTIC
), f 63;
#X msg 74 226 aresolution \$1;
#X text 189 256 distance resolution ( default 1 \, for mode CV_HOUGH_MULTI_SCALE
), f 65;
#X text 187 226 angle resolution ( default 1 \, for mode CV_HOUGH_MULTI_SCALE
), f 63;
#X msg 28 74 maxlines \$1;
#X text 119 70 maximum nuber of lines detected ( default : 10 );
#X text 151 131 threshold ( default 50 );
#X text 144 90 Detection mode ( default : CV_HOUGH_PROBABILISTIC )
;
#X msg 81 258 dresolution \$1;
#X obj 28 18 r lines-params;
#X obj 28 45 unpack f f f f f f f;
#X obj 28 348 outlet;
#X connect 0 0 19 0;
#X connect 4 0 19 0;
#X connect 5 0 19 0;
#X connect 6 0 19 0;
#X connect 9 0 19 0;
#X connect 12 0 19 0;
#X connect 16 0 19 0;
#X connect 17 0 18 0;
#X connect 18 0 12 0;
#X connect 18 1 0 0;
#X connect 18 2 4 0;
#X connect 18 3 5 0;
#X connect 18 4 6 0;
#X connect 18 5 9 0;
#X connect 18 6 16 0;
#X restore 79 132 pd lines-params;
#X msg 316 282 add id \$1;
#X obj 309 399 purest_json/json-encode;
#X obj 249 167 t b a b;
#X msg 569 206 clear;
#X obj 309 453 list trim;
#X obj 307 480 s json-data;
#X msg 328 305 add x1 \$1;
#X msg 338 325 add y1 \$1;
#X msg 348 345 add x2 \$1;
#X msg 366 364 add y2 \$1;
#X obj 303 251 unpack f f f f f;
#X obj 309 425 list prepend array lines;
#X obj 39 241 spigot;
#X obj 39 267 t b b;
#X msg 81 268 0;
#X msg 88 244 1;
#X obj 93 219 r reset;
#X obj 46 57 t a a, f 71;
#X obj 513 533 gemlist;
#X obj 48 384 t b b;
#X obj 197 199 t b a;
#X obj 163 514 t a;
#X obj 276 209 t a a, f 24;
#X obj 611 251 list split 2;
#X obj 658 297 unpack;
#X obj 596 298 unpack;
#X obj 608 349 -;
#X obj 657 345 -;
#X obj 608 375 t f f;
#X obj 608 401 *;
#X obj 655 374 t f f;
#X obj 655 400 *;
#X obj 608 427 +;
#X obj 608 453 sqrt;
#X msg 443 367 add d \$1;
#X connect 0 0 35 0;
#X connect 2 0 3 0;
#X connect 3 0 2 1;
#X connect 3 0 5 1;
#X connect 4 0 2 1;
#X connect 5 0 14 0;
#X connect 6 0 30 0;
#X connect 6 1 38 0;
#X connect 12 0 6 0;
#X connect 13 0 4 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 17 0 6 0;
#X connect 18 0 19 0;
#X connect 19 0 29 0;
#X connect 20 0 19 0;
#X connect 20 1 40 0;
#X connect 20 2 21 0;
#X connect 21 0 19 0;
#X connect 22 0 23 0;
#X connect 24 0 19 0;
#X connect 25 0 19 0;
#X connect 26 0 19 0;
#X connect 27 0 19 0;
#X connect 28 0 18 0;
#X connect 28 1 24 0;
#X connect 28 2 25 0;
#X connect 28 3 26 0;
#X connect 28 4 27 0;
#X connect 29 0 22 0;
#X connect 30 0 31 0;
#X connect 31 0 37 0;
#X connect 31 1 32 0;
#X connect 32 0 30 1;
#X connect 33 0 30 1;
#X connect 34 0 33 0;
#X connect 35 0 12 0;
#X connect 35 1 36 1;
#X connect 36 0 1 0;
#X connect 37 0 39 0;
#X connect 37 1 5 0;
#X connect 38 0 2 0;
#X connect 38 1 20 0;
#X connect 39 0 36 0;
#X connect 40 0 28 0;
#X connect 40 1 41 0;
#X connect 41 0 43 0;
#X connect 41 1 42 0;
#X connect 42 0 44 1;
#X connect 42 1 45 1;
#X connect 43 0 44 0;
#X connect 43 1 45 0;
#X connect 44 0 46 0;
#X connect 45 0 48 0;
#X connect 46 0 47 0;
#X connect 46 1 47 1;
#X connect 47 0 50 0;
#X connect 48 0 49 0;
#X connect 48 1 49 1;
#X connect 49 0 50 1;
#X connect 50 0 51 0;
#X connect 51 0 52 0;
#X connect 52 0 19 0;
#X restore 34 349 pd lines;
#N canvas 405 5 765 580 mean_color 0;
#X obj 52 100 separator;
#X obj 52 133 pix_mean_color;
#X obj 372 223 list prepend append;
#X obj 372 249 list trim;
#X obj 372 275 s store_entries;
#X obj 52 18 inlet;
#X obj 559 535 outlet;
#X obj 147 161 t a a;
#X obj 372 91 unpack f f f f;
#X obj 372 117 +;
#X obj 372 143 +;
#X obj 372 169 +;
#X obj 372 195 / 4;
#X obj 146 329 list trim;
#X obj 146 355 s json-data;
#X obj 146 306 list prepend array mean_col;
#X obj 145 256 list-abs/list-drip;
#X obj 52 49 t a a, f 79;
#X obj 557 471 gemlist;
#X connect 0 0 1 0;
#X connect 1 1 7 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 5 0 17 0;
#X connect 7 0 16 0;
#X connect 7 1 8 0;
#X connect 8 0 9 0;
#X connect 8 1 9 1;
#X connect 8 2 10 1;
#X connect 8 3 11 1;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 2 0;
#X connect 13 0 14 0;
#X connect 15 0 13 0;
#X connect 16 0 15 0;
#X connect 16 1 18 0;
#X connect 17 0 0 0;
#X connect 17 1 18 1;
#X connect 18 0 6 0;
#X restore 211 175 pd mean_color;
#N canvas 482 42 677 599 faces 0;
#X obj 83 71 separator;
#X obj 84 6 inlet;
#X obj 118 252 list prepend append;
#X obj 118 278 list trim;
#X obj 118 304 s store_entries;
#X obj 524 534 outlet;
#X obj 83 127 pix_opencv_haarcascade;
#X obj 95 100 r faces-params;
#X obj 305 212 unpack f f f f;
#X msg 313 244 add id \$1;
#X msg 325 267 add x \$1;
#X msg 335 287 add y \$1;
#X msg 345 307 add r \$1;
#X obj 306 361 purest_json/json-encode;
#X obj 250 177 t b a b;
#X msg 461 211 clear;
#X obj 306 415 list trim;
#X obj 304 442 s json-data;
#X obj 306 387 list prepend array faces;
#X obj 83 38 t a a, f 70;
#X obj 524 505 gemlist;
#X obj 69 474 spigot;
#X obj 69 500 t b b;
#X msg 111 501 0;
#X msg 118 477 1;
#X obj 123 452 r reset;
#X connect 0 0 6 0;
#X connect 1 0 19 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 6 0 21 0;
#X connect 6 1 2 0;
#X connect 6 2 14 0;
#X connect 7 0 6 0;
#X connect 8 0 9 0;
#X connect 8 1 10 0;
#X connect 8 2 11 0;
#X connect 8 3 12 0;
#X connect 9 0 13 0;
#X connect 10 0 13 0;
#X connect 11 0 13 0;
#X connect 12 0 13 0;
#X connect 13 0 18 0;
#X connect 14 0 13 0;
#X connect 14 1 8 0;
#X connect 14 2 15 0;
#X connect 15 0 13 0;
#X connect 16 0 17 0;
#X connect 18 0 16 0;
#X connect 19 0 0 0;
#X connect 19 1 20 1;
#X connect 20 0 5 0;
#X connect 21 0 22 0;
#X connect 22 0 20 0;
#X connect 22 1 23 0;
#X connect 23 0 21 1;
#X connect 24 0 21 1;
#X connect 25 0 24 0;
#X restore 34 281 pd faces;
#N canvas 239 56 685 691 keypoints 0;
#X obj 33 22 inlet;
#X obj 598 638 outlet;
#X floatatom 121 179 5 0 0 0 - - -;
#X text 168 175 window size;
#X obj 33 205 pix_opencv_lk;
#X msg 142 108 mark all;
#X obj 33 111 separator;
#X obj 142 81 r reset;
#N canvas 0 22 450 300 keypoints-params 0;
#X msg 99 190 quality \$1;
#X msg 60 161 mindistance \$1;
#X obj 99 128 / 1000;
#X obj 60 92 unpack;
#X obj 60 57 t b b;
#X obj 60 255 outlet;
#X obj 60 25 r keypoints-params;
#X connect 0 0 5 0;
#X connect 1 0 5 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 3 1 2 0;
#X connect 4 0 3 0;
#X connect 6 0 4 0;
#X restore 47 144 pd keypoints-params;
#X msg 230 119 init;
#X obj 232 95 r init-keypoints;
#X obj 192 431 f;
#X obj 226 431 + 1;
#X msg 254 396 0;
#X obj 208 454 f;
#X text 485 186 X1;
#X text 512 183 Y1;
#X text 240 452 how many;
#X obj 248 362 r reset;
#X obj 205 485 list prepend append;
#X obj 205 511 list trim;
#X obj 205 537 s store_entries;
#X msg 413 259 add id \$1;
#X obj 406 376 purest_json/json-encode;
#X obj 350 192 t b a b;
#X msg 561 226 clear;
#X obj 406 430 list trim;
#X obj 404 457 s json-data;
#X msg 425 282 add x \$1;
#X msg 435 302 add y \$1;
#X obj 405 227 unpack f f f;
#X text 450 186 id;
#X obj 406 402 list prepend array keypoints;
#X obj 68 368 spigot;
#X obj 68 394 t b b;
#X msg 110 395 0;
#X msg 117 371 1;
#X obj 122 346 r reset;
#X obj 261 238 t b a;
#X obj 65 450 t b b;
#X obj 172 605 t b;
#X obj 580 600 gemlist;
#X obj 33 52 t a a, f 86;
#X connect 0 0 42 0;
#X connect 2 0 4 1;
#X connect 4 0 33 0;
#X connect 4 1 38 0;
#X connect 5 0 4 0;
#X connect 6 0 4 0;
#X connect 7 0 5 0;
#X connect 8 0 4 0;
#X connect 9 0 4 0;
#X connect 10 0 9 0;
#X connect 11 0 12 0;
#X connect 12 0 11 1;
#X connect 12 0 14 1;
#X connect 13 0 11 1;
#X connect 14 0 19 0;
#X connect 18 0 13 0;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 22 0 23 0;
#X connect 23 0 32 0;
#X connect 24 0 23 0;
#X connect 24 1 30 0;
#X connect 24 2 25 0;
#X connect 25 0 23 0;
#X connect 26 0 27 0;
#X connect 28 0 23 0;
#X connect 29 0 23 0;
#X connect 30 0 22 0;
#X connect 30 1 28 0;
#X connect 30 2 29 0;
#X connect 32 0 26 0;
#X connect 33 0 34 0;
#X connect 34 0 39 0;
#X connect 34 1 35 0;
#X connect 35 0 33 1;
#X connect 36 0 33 1;
#X connect 37 0 36 0;
#X connect 38 0 11 0;
#X connect 38 1 24 0;
#X connect 39 0 40 0;
#X connect 39 1 14 0;
#X connect 40 0 41 0;
#X connect 41 0 1 0;
#X connect 42 0 6 0;
#X connect 42 1 41 1;
#X restore 34 417 pd keypoints;
#N canvas 0 22 686 509 histo 0;
#X obj 51 95 separator;
#X obj 343 167 f 0.7;
#X obj 375 138 r histo-params;
#X obj 51 123 pix_histo \$0-h;
#X obj 343 197 array quantile \$0-h;
#X obj 343 283 list prepend append;
#X obj 343 309 list trim;
#X obj 53 7 inlet;
#X obj 343 335 s store_entries;
#X obj 114 198 r reset;
#X obj 61 224 spigot;
#X obj 61 250 t b b;
#X msg 110 253 0;
#X msg 113 226 1;
#X obj 61 279 array get \$0-h;
#X obj 351 255 list prepend histo;
#X obj 40 380 list trim;
#X obj 40 406 s json-data;
#X obj 40 350 list prepend array histo;
#X obj 50 314 list-abs/list-drip;
#X obj 52 58 t a a, f 72;
#X obj 499 428 gemlist;
#X obj 499 454 outlet;
#X obj 51 149 t b b;
#X obj 225 18 array define \$0-h 50;
#X obj 343 224 / 50;
#X connect 0 0 3 0;
#X connect 1 0 4 0;
#X connect 2 0 1 1;
#X connect 3 0 23 0;
#X connect 4 0 25 0;
#X connect 5 0 6 0;
#X connect 6 0 8 0;
#X connect 7 0 20 0;
#X connect 9 0 13 0;
#X connect 10 0 11 0;
#X connect 11 0 14 0;
#X connect 11 1 12 0;
#X connect 12 0 10 1;
#X connect 13 0 10 1;
#X connect 14 0 19 0;
#X connect 16 0 17 0;
#X connect 18 0 16 0;
#X connect 19 0 18 0;
#X connect 19 1 21 0;
#X connect 20 0 0 0;
#X connect 20 1 21 1;
#X connect 21 0 22 0;
#X connect 23 0 10 0;
#X connect 23 1 1 0;
#X connect 25 0 5 0;
#X restore 34 213 pd histo;
#X obj 34 25 inlet;
#X obj 66 104 outlet;
#X text 322 172 <-- get mean color of image (RGBA);
#X text 147 311 <-- get cvblobs;
#X text 144 272 <-- get faces from haarcascade;
#X text 145 210 <-- get histogram and quantile;
#X text 140 348 <-- get hough lines;
#X text 138 384 <-- get hough circles;
#X text 144 416 <-- get keypoints (corners) using lk algorithm;
#N canvas 211 0 486 564 cvblobs 0;
#X obj 35 298 pix_opencv_contours;
#X obj 35 157 pix_gray;
#X msg 133 257 area \$1;
#X obj 35 200 pix_opencv_threshold;
#X obj 172 164 nbx 5 14 -1e+37 1e+37 0 1 empty empty luminance_threshold
0 -8 0 10 -262144 -1 -1 91 256;
#X obj 133 238 nbx 5 14 -1e+37 1e+37 0 1 empty empty area_threshold
0 -8 0 10 -262144 -1 -1 80 256;
#X msg 218 249 cvblobOutput 1 \, hierarchy_level 0, f 17;
#X obj 35 24 inlet;
#X obj 133 119 unpack;
#X obj 133 91 r blobs-params;
#X obj 129 448 list prepend append;
#X obj 129 477 list trim;
#X obj 129 505 s store_entries;
#X obj 35 73 separator;
#X obj 218 223 r blobs-params;
#X obj 287 531 outlet;
#X obj 287 502 gemlist;
#X obj 35 48 t a a, f 51;
#N canvas 43 0 1237 756 blobgem 0;
#X obj 247 52 list split 1;
#X obj 640 681 s json-data;
#X msg 216 364 add id \$1;
#X msg 239 394 add Xcenter \$1;
#X msg 256 417 add Ycenter \$1;
#X msg 270 439 add Xsize \$1;
#X msg 287 462 add Ysize \$1;
#X msg 309 481 add angle \$1;
#X msg 334 504 add area \$1;
#X obj 346 287 list split 7;
#X obj 245 335 unpack f f f f f f f;
#X obj 439 323 list split 8;
#X obj 402 384 list-abs/list-drip;
#X obj 572 381 unpack f f f f;
#X msg 572 407 add points \$1;
#X msg 592 430 add length \$1;
#X msg 611 452 add Xcentroid \$1;
#X msg 621 474 add Ycentroid \$1;
#X obj 536 558 purest_json/json-encode;
#X msg 402 410 array corners \$1;
#X msg 592 592 array cvblob \$1;
#X obj 248 26 route cvblob count, f 73;
#X obj 278 254 t b a b, f 28;
#X msg 809 460 clear;
#X obj 277 86 t b a a b, f 34;
#X msg 937 430 clear;
#X obj 247 2 inlet;
#X obj 114 727 outlet;
#X obj 293 133 list split 1;
#X obj 401 118 list split 1;
#X obj 333 204 _repack 19;
#X obj 333 177 list-abs/list-drip;
#X obj 394 147 t f b;
#X msg 108 426 bang \, clear;
#X msg 19 444 bang \, clear;
#X msg 1019 387 add blobcount \$1 \, add blobpoints \$2, f 17;
#X connect 0 0 27 0;
#X connect 0 1 24 0;
#X connect 2 0 18 0;
#X connect 3 0 18 0;
#X connect 4 0 18 0;
#X connect 5 0 18 0;
#X connect 6 0 18 0;
#X connect 7 0 18 0;
#X connect 8 0 18 0;
#X connect 9 0 10 0;
#X connect 9 1 11 0;
#X connect 10 0 2 0;
#X connect 10 1 3 0;
#X connect 10 2 4 0;
#X connect 10 3 5 0;
#X connect 10 4 6 0;
#X connect 10 5 7 0;
#X connect 10 6 8 0;
#X connect 11 0 12 0;
#X connect 11 1 13 0;
#X connect 12 0 19 0;
#X connect 13 0 14 0;
#X connect 13 1 15 0;
#X connect 13 2 16 0;
#X connect 13 3 17 0;
#X connect 14 0 18 0;
#X connect 15 0 18 0;
#X connect 16 0 18 0;
#X connect 17 0 18 0;
#X connect 18 0 20 0;
#X connect 19 0 18 0;
#X connect 20 0 1 0;
#X connect 21 0 0 0;
#X connect 21 1 35 0;
#X connect 22 0 33 0;
#X connect 22 1 9 0;
#X connect 22 2 23 0;
#X connect 23 0 18 0;
#X connect 24 0 34 0;
#X connect 24 1 28 0;
#X connect 24 2 29 0;
#X connect 24 3 25 0;
#X connect 26 0 21 0;
#X connect 28 1 31 0;
#X connect 29 0 32 0;
#X connect 30 0 22 0;
#X connect 31 0 30 0;
#X connect 32 0 30 1;
#X connect 32 1 30 1;
#X connect 33 0 18 0;
#X connect 35 0 1 0;
#X restore 198 325 pd blobgem;
#X obj 28 391 spigot;
#X obj 28 417 t b b;
#X msg 70 418 0;
#X msg 77 394 1;
#X obj 82 369 r reset;
#X msg 118 399 0;
#X obj 163 386 t b a;
#X connect 0 0 19 0;
#X connect 0 2 18 0;
#X connect 1 0 3 0;
#X connect 2 0 0 0;
#X connect 3 0 0 0;
#X connect 4 0 3 2;
#X connect 5 0 2 0;
#X connect 6 0 0 0;
#X connect 7 0 17 0;
#X connect 8 0 5 0;
#X connect 8 1 4 0;
#X connect 9 0 8 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 13 0 1 0;
#X connect 14 0 6 0;
#X connect 16 0 15 0;
#X connect 17 0 13 0;
#X connect 17 1 16 1;
#X connect 18 0 25 0;
#X connect 19 0 20 0;
#X connect 20 1 21 0;
#X connect 21 0 19 1;
#X connect 22 0 19 1;
#X connect 23 0 22 0;
#X connect 23 0 24 0;
#X connect 25 0 16 0;
#X connect 25 1 10 0;
#X restore 34 315 pd cvblobs;
#N canvas 406 86 710 559 bodies 0;
#X obj 72 89 separator;
#X obj 73 8 inlet;
#X obj 93 184 list prepend append;
#X obj 93 210 list trim;
#X obj 93 236 s store_entries;
#X obj 538 530 outlet;
#X obj 72 145 pix_opencv_haarcascade;
#X obj 84 118 r bodies-params;
#X obj 321 207 unpack f f f f;
#X msg 329 239 add id \$1;
#X msg 341 262 add x \$1;
#X msg 351 282 add y \$1;
#X msg 361 302 add r \$1;
#X obj 322 356 purest_json/json-encode;
#X obj 242 173 t b a b;
#X msg 477 206 clear;
#X obj 322 410 list trim;
#X obj 320 437 s json-data;
#X obj 322 382 list prepend array bodies;
#X obj 72 48 t a a, f 73;
#X obj 538 498 gemlist;
#X obj 143 481 t b;
#X obj 95 390 spigot;
#X obj 95 416 t b b;
#X msg 137 417 0;
#X msg 144 393 1;
#X obj 149 368 r reset;
#X connect 0 0 6 0;
#X connect 1 0 19 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 6 0 22 0;
#X connect 6 1 2 0;
#X connect 6 2 14 0;
#X connect 7 0 6 0;
#X connect 8 0 9 0;
#X connect 8 1 10 0;
#X connect 8 2 11 0;
#X connect 8 3 12 0;
#X connect 9 0 13 0;
#X connect 10 0 13 0;
#X connect 11 0 13 0;
#X connect 12 0 13 0;
#X connect 13 0 18 0;
#X connect 14 0 13 0;
#X connect 14 1 8 0;
#X connect 14 2 15 0;
#X connect 15 0 13 0;
#X connect 16 0 17 0;
#X connect 18 0 16 0;
#X connect 19 0 0 0;
#X connect 19 1 20 1;
#X connect 20 0 5 0;
#X connect 21 0 20 0;
#X connect 22 0 23 0;
#X connect 23 0 21 0;
#X connect 23 1 24 0;
#X connect 24 0 22 1;
#X connect 25 0 22 1;
#X connect 26 0 25 0;
#X restore 34 247 pd bodies;
#X text 146 241 <-- get bodies from haarcascade;
#X obj 205 88 purest_json/json-encode;
#X obj 205 28 r json-data;
#X obj 34 51 t a a;
#N canvas 491 36 715 666 cluster 0;
#X obj 52 378 pix_dump;
#X obj 191 407 array define pixels;
#X obj 28 231 pix_resize 85 53;
#X obj 28 105 pix_info _____;
#X obj 41 136 * 0.1;
#X obj 85 138 * 0.1;
#X obj 41 161 pack;
#X msg 39 206 dimen \$1 \$2;
#X obj 167 103 / 100;
#X text 76 164 lower res and pixelate first;
#X obj 28 12 inlet;
#X obj 28 74 separator;
#X obj 28 42 t a a, f 49;
#X obj 309 499 gemlist;
#X obj 309 527 outlet;
#X obj 76 290 r reset;
#X obj 30 262 t b a, f 13;
#X obj 29 315 spigot;
#X obj 29 341 t b b;
#X msg 69 341 0;
#X msg 78 317 1;
#X obj 132 442 _array_fill pixels;
#X obj 86 409 t b a;
#X obj 86 440 f 5;
#X obj 230 90 r cluster-params;
#X obj 230 116 unpack;
#N canvas 0 22 832 609 means 0;
#X obj 177 43 route cluster_list, f 19;
#X obj 86 157 list-abs/list-drip;
#X obj 86 181 * 4;
#X obj 86 206 array get pixels 0 3;
#X obj 87 276 list prepend append;
#X obj 87 298 list trim;
#X obj 87 320 list store;
#X obj 87 342 t a b;
#X msg 85 406 mean;
#X obj 86 228 unpack f f f;
#X obj 242 279 list prepend append;
#X obj 242 301 list trim;
#X obj 242 323 list store;
#X obj 242 345 t a b;
#X msg 247 408 mean;
#X obj 437 271 list prepend append;
#X obj 437 293 list trim;
#X obj 437 315 list store;
#X obj 437 337 t a b;
#X msg 442 400 mean;
#X obj 87 440 tabletool R;
#X obj 248 443 tabletool G;
#X obj 441 432 tabletool B;
#X obj 644 22 array define R;
#X obj 647 48 array define G;
#X obj 654 75 array define B;
#X obj 257 190 t b b b;
#X obj 105 110 t a a;
#X obj 564 217 list length;
#X obj 655 212 route num_instances;
#X obj 603 253 /;
#X obj 460 507 pack f f f f;
#X obj 176 10 inlet;
#X obj 483 400 _array_fill B;
#X obj 441 366 t b a;
#X obj 294 404 _array_fill G;
#X obj 129 401 _array_fill R;
#X obj 248 374 t b a;
#X obj 91 368 t b a;
#X obj 460 567 outlet;
#X connect 0 0 27 0;
#X connect 0 1 29 0;
#X connect 1 0 2 0;
#X connect 1 1 26 0;
#X connect 2 0 3 0;
#X connect 3 0 9 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 38 0;
#X connect 7 1 6 1;
#X connect 8 0 20 0;
#X connect 9 0 4 0;
#X connect 9 1 10 0;
#X connect 9 2 15 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 13 0 37 0;
#X connect 13 1 12 1;
#X connect 14 0 21 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 18 0 34 0;
#X connect 18 1 17 1;
#X connect 19 0 22 0;
#X connect 20 0 31 0;
#X connect 21 0 31 1;
#X connect 22 0 31 2;
#X connect 26 0 6 0;
#X connect 26 1 12 0;
#X connect 26 2 17 0;
#X connect 27 0 1 0;
#X connect 27 1 28 0;
#X connect 28 0 30 0;
#X connect 29 0 30 1;
#X connect 30 0 31 3;
#X connect 31 0 39 0;
#X connect 32 0 0 0;
#X connect 34 0 19 0;
#X connect 34 1 33 0;
#X connect 37 0 14 0;
#X connect 37 1 35 0;
#X connect 38 0 8 0;
#X connect 38 1 36 0;
#X restore 397 177 pd means;
#N canvas 0 22 450 444 cluster 0;
#X obj 128 355 timbreID;
#X obj 61 100 array get pixels;
#X obj 62 131 list-abs/list-drip;
#X obj 62 160 zexy/repack 4;
#X obj 61 190 list split 3;
#X msg 282 160 clear;
#X obj 163 200 t b b;
#X msg 335 224 num_instances;
#X msg 114 286 cluster_list \$1;
#X msg 230 308 knn 10 \, output_knn_matches 0;
#X obj 182 169 t b b b;
#X obj 41 15 inlet;
#X obj 44 56 t b b b f;
#X obj 269 110 t f f;
#X msg 237 240 cluster \$1;
#X obj 217 196 f 5;
#X obj 119 259 iterate;
#X obj 163 226 f 5;
#X obj 118 401 outlet;
#X obj 342 378 outlet;
#X connect 0 3 18 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 10 0;
#X connect 3 0 4 0;
#X connect 4 0 0 0;
#X connect 5 0 0 0;
#X connect 6 0 17 0;
#X connect 6 1 9 0;
#X connect 7 0 0 0;
#X connect 8 0 0 0;
#X connect 9 0 0 0;
#X connect 10 0 6 0;
#X connect 10 1 15 0;
#X connect 10 2 7 0;
#X connect 11 0 12 0;
#X connect 12 1 1 0;
#X connect 12 2 5 0;
#X connect 12 3 13 0;
#X connect 13 0 17 1;
#X connect 13 1 15 1;
#X connect 14 0 0 0;
#X connect 15 0 14 0;
#X connect 16 0 8 0;
#X connect 16 1 19 0;
#X connect 17 0 16 0;
#X restore 84 469 pd cluster list;
#X obj 450 255 unpack f f f f;
#X obj 451 404 purest_json/json-encode;
#X obj 396 206 t b a b;
#X msg 606 254 clear;
#X obj 451 458 list trim;
#X obj 449 485 s json-data;
#X msg 458 287 add r \$1;
#X msg 470 310 add g \$1;
#X msg 480 330 add b \$1;
#X msg 490 350 add pct \$1;
#X obj 451 430 list prepend array mean_col;
#X connect 0 1 22 0;
#X connect 2 0 16 0;
#X connect 3 0 2 0;
#X connect 3 1 4 0;
#X connect 3 2 5 0;
#X connect 4 0 6 0;
#X connect 5 0 6 1;
#X connect 6 0 7 0;
#X connect 7 0 2 0;
#X connect 8 0 4 1;
#X connect 8 0 5 1;
#X connect 10 0 12 0;
#X connect 11 0 3 0;
#X connect 12 0 11 0;
#X connect 12 1 13 1;
#X connect 13 0 14 0;
#X connect 15 0 20 0;
#X connect 16 0 17 0;
#X connect 16 1 0 0;
#X connect 17 0 18 0;
#X connect 18 0 0 0;
#X connect 18 1 19 0;
#X connect 19 0 17 1;
#X connect 20 0 17 1;
#X connect 22 0 23 0;
#X connect 22 1 21 0;
#X connect 23 0 27 0;
#X connect 24 0 25 0;
#X connect 25 0 8 0;
#X connect 25 1 23 1;
#X connect 26 0 30 0;
#X connect 27 0 26 0;
#X connect 27 1 13 0;
#X connect 28 0 34 0;
#X connect 28 1 35 0;
#X connect 28 2 36 0;
#X connect 28 3 37 0;
#X connect 29 0 38 0;
#X connect 30 0 29 0;
#X connect 30 1 28 0;
#X connect 30 2 31 0;
#X connect 31 0 29 0;
#X connect 32 0 33 0;
#X connect 34 0 29 0;
#X connect 35 0 29 0;
#X connect 36 0 29 0;
#X connect 37 0 29 0;
#X connect 38 0 32 0;
#X restore 33 174 pd cluster;
#X connect 0 0 4 0;
#X connect 1 0 0 0;
#X connect 3 0 15 0;
#X connect 5 0 16 0;
#X connect 6 0 20 0;
#X connect 15 0 1 0;
#X connect 16 0 3 0;
#X connect 19 0 18 0;
#X connect 20 0 21 0;
#X connect 20 1 7 0;
#X connect 21 0 5 0;
#X restore 176 507 pd features;
#N canvas 0 22 450 300 ROI 0;
#X obj 30 20 inlet;
#X obj 30 224 outlet;
#X obj 30 122 spigot 1;
#X obj 30 71 t a a;
#X obj 131 110 spigot;
#X obj 131 136 pix_crop;
#X obj 244 104 t b p;
#X obj 244 78 text;
#X msg 244 130 0;
#X obj 244 156 text get -s text t;
#X obj 244 182 unpack f f f f;
#X obj 110 23 r roi-flag;
#X obj 110 49 t f f;
#X obj 110 75 ==;
#X obj 244 23 r roi-txt;
#X msg 244 50 read \$1 \, bang;
#X obj 288 228 print roi;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 3 1 4 0;
#X connect 4 0 5 0;
#X connect 5 0 1 0;
#X connect 6 0 8 0;
#X connect 6 1 9 3;
#X connect 7 0 6 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 9 0 16 0;
#X connect 10 0 5 1;
#X connect 10 1 5 2;
#X connect 10 2 5 3;
#X connect 10 3 5 4;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 12 1 4 1;
#X connect 13 0 2 1;
#X connect 14 0 15 0;
#X connect 15 0 7 0;
#X restore 176 475 pd ROI;
#X obj 382 427 sel 4 0;
#X obj 384 456 s init-keypoints, f 14;
#X msg 515 399 \; entries write -c ../txt/\$1-entries.txt;
#X obj 525 106 t a a;
#X obj 580 148 s base;
#X msg 294 460 \; index \$1 \; reset bang \;;
#X connect 1 0 54 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 3 1 32 0;
#X connect 4 0 1 0;
#X connect 5 0 6 0;
#X connect 5 1 3 0;
#X connect 6 0 16 0;
#X connect 7 0 0 0;
#X connect 8 0 29 1;
#X connect 9 0 15 0;
#X connect 10 0 11 0;
#X connect 10 0 31 0;
#X connect 11 0 10 1;
#X connect 12 0 13 0;
#X connect 12 0 9 1;
#X connect 13 0 12 1;
#X connect 14 0 12 0;
#X connect 15 0 47 0;
#X connect 15 1 18 0;
#X connect 16 0 48 0;
#X connect 16 1 15 1;
#X connect 16 2 14 0;
#X connect 17 0 20 0;
#X connect 18 0 22 0;
#X connect 18 1 19 0;
#X connect 19 0 35 0;
#X connect 20 0 8 0;
#X connect 20 1 7 0;
#X connect 21 0 23 0;
#X connect 22 0 50 0;
#X connect 23 0 5 0;
#X connect 23 1 58 0;
#X connect 24 0 0 0;
#X connect 25 0 26 0;
#X connect 27 0 28 0;
#X connect 29 0 9 0;
#X connect 30 0 29 0;
#X connect 31 0 55 0;
#X connect 32 0 0 0;
#X connect 33 0 34 0;
#X connect 35 0 8 0;
#X connect 35 1 7 0;
#X connect 36 0 37 0;
#X connect 36 1 33 0;
#X connect 37 0 38 0;
#X connect 38 0 46 0;
#X connect 38 1 39 0;
#X connect 39 0 37 1;
#X connect 40 0 41 0;
#X connect 41 0 37 1;
#X connect 42 0 43 0;
#X connect 43 0 44 0;
#X connect 45 0 42 0;
#X connect 46 0 30 0;
#X connect 47 0 1 1;
#X connect 47 1 60 0;
#X connect 47 2 10 0;
#X connect 48 0 49 0;
#X connect 48 1 17 0;
#X connect 49 0 9 0;
#X connect 50 0 51 0;
#X connect 50 1 57 0;
#X connect 50 2 24 0;
#X connect 51 0 25 0;
#X connect 51 1 27 0;
#X connect 53 0 36 0;
#X connect 54 0 53 0;
#X connect 55 0 12 0;
#X connect 55 1 56 0;
#X connect 58 0 22 1;
#X connect 58 1 59 0;
#X restore 26 189 pd analyze;
#X text 171 127 <-- only one float per feature;
#X obj 26 81 declare -lib Gem -path pix_opencv -path ./lib -lib timbreIDLib
;
